var m=Object.defineProperty;var p=(c,e,t)=>e in c?m(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var s=(c,e,t)=>p(c,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();class f{constructor(e,t){s(this,"container");s(this,"image");s(this,"ui");this.container=e,this.image=this.container.querySelector("img"),this.ui=t,this.container.addEventListener("click",()=>{this.ui.tribunal.isPause||(this.ui.cancelAll(),this.container.classList.add("active"),this.ui.case.toggleCase(!1),this.ui.openResume(!0,0))})}updateAccused(e,t){console.log("ACCUSED",e),this.image.src=`cases/${t}/${t}_0_idle.gif`}}class g{constructor(e){s(this,"container");s(this,"resume");s(this,"photo");s(this,"name");s(this,"info");s(this,"casePaper");s(this,"title");s(this,"description");this.container=e,this.resume=this.container.querySelector(".resume"),this.casePaper=this.container.querySelector(".case-paper"),this.photo=this.resume.querySelector("#photo"),this.name=this.resume.querySelector("#name"),this.info=this.resume.querySelector("#info"),this.title=this.casePaper.querySelector("#title"),this.description=this.casePaper.querySelector("#case-content")}toggleCase(e){e?(this.casePaper.classList.add("show"),this.resume.classList.remove("show")):(this.resume.classList.add("show"),this.casePaper.classList.remove("show"))}openResume(e,t,r,i){console.log("DATA",e,t,r),t?(this.name.innerHTML=e.accused.name,this.info.innerHTML=e.accused.description,this.photo.src=`cases/${i}/${i}_0_idle.png`):(this.name.innerHTML=e.jury[r-1].name,this.info.innerHTML=e.jury[r-1].description,this.photo.src=`cases/${i}/${i}_${r}.png`)}openCase(e){this.title.innerHTML=e.accused.case.title,this.description.innerHTML=e.accused.case.description}verdictChange(e,t){this.title.innerHTML=e?"Приговор вынесен ВЕРНО!":"Приговор вынесен ЛОЖНО",e?this.description.innerHTML="Вы потрясающий судья, продолжайте в том же духе!":this.description.innerHTML=t}}class y{constructor(e,t,r){s(this,"container");s(this,"num");s(this,"image");s(this,"ui");this.container=e,this.image=this.container.querySelector("img"),this.num=t,this.ui=r,this.container.addEventListener("click",()=>{this.ui.tribunal.isPause||(this.ui.cancelAll(),this.ui.case.toggleCase(!1),this.container.classList.add("active"),this.ui.openResume(!1,this.num))})}updateJury(e,t){console.log("UPDATE JURY",e),this.image.src=`cases/${t}/${t}_${this.num}.png`}}class L{constructor(e){s(this,"tribunal");s(this,"juries");s(this,"accused");s(this,"case");s(this,"bottom");s(this,"bottomNext");s(this,"endingBtn");var r,i,n,o,a,u;this.tribunal=e,this.juries=[],this.accused=new f(document.querySelector(".accused-container"),this),document.querySelectorAll(".jury").forEach((h,d)=>{this.juries.push(new y(h,d+1,this))}),this.case=new g(document.querySelector(".case-container")),this.bottom=document.querySelector(".bottom"),this.bottomNext=document.querySelector(".bottom-next"),this.endingBtn=document.querySelector(".bottom-ending"),(r=document.querySelector(".resume-button"))==null||r.addEventListener("click",()=>{console.log("resume"),!this.tribunal.isPause&&(this.case.toggleCase(!1),this.cancelAll(),this.accused.container.classList.add("active"),this.openResume(!0,0))}),(i=document.querySelector(".case-button"))==null||i.addEventListener("click",()=>{console.log("case"),!this.tribunal.isPause&&(this.cancelAll(),this.case.toggleCase(!0),this.case.openCase(this.tribunal.currentCase))}),(n=document.querySelector(".green-stamp"))==null||n.addEventListener("click",()=>{console.log("green stamp"),!this.tribunal.isPause&&this.tribunal.changeVerdict(!0)}),(o=document.querySelector(".red-stamp"))==null||o.addEventListener("click",()=>{console.log("red stamp"),!this.tribunal.isPause&&this.tribunal.changeVerdict(!1)}),(a=document.querySelector(".hummer"))==null||a.addEventListener("click",()=>{console.log("hummer"),!this.tribunal.isPause&&this.tribunal.announceVerdict()}),(u=document.querySelector(".next-button"))==null||u.addEventListener("click",()=>{this.tribunal.newProcess()})}openResume(e,t){this.tribunal.isPause||(e?this.case.openResume(this.tribunal.currentCase,!0,0,this.tribunal.caseIterator-1):this.case.openResume(this.tribunal.currentCase,!1,t,this.tribunal.caseIterator-1))}openCase(){this.tribunal.isPause||this.case.openCase(this.tribunal.currentCase)}cancelAll(){this.juries.forEach(e=>{e.container.classList.remove("active")}),this.accused.container.classList.remove("active")}updateJuries(e,t){console.log("HELLO",e),e.forEach((r,i)=>{this.juries[i].updateJury(r,t)})}updateAccused(e,t){this.accused.updateAccused(e,t)}openVerdict(e){console.log("openVerdict",e),console.log("THIS CASE",this.tribunal.currentCase),this.case.toggleCase(!0),this.tribunal.isPause=!0,this.bottom.classList.add("hide"),this.tribunal.caseIterator===6?this.endingBtn.classList.remove("hide"):this.bottomNext.classList.remove("hide"),e===this.tribunal.currentCase.isGuilty?this.case.verdictChange(!0,""):this.case.verdictChange(!1,this.tribunal.currentCase.failText)}}const b=10;class C{constructor(){s(this,"ui",new L(this));s(this,"currentVerdict",0);s(this,"caseIterator");s(this,"currentCase",null);s(this,"isPause",!1);this.caseIterator=1,this.newProcess()}async newProcess(){if(this.caseIterator>b){console.log("Конец игры. Вы всех рассудили!");return}this.currentCase=await this.loadCase(`cases/${this.caseIterator}/case.json`),console.log(this.currentCase),this.ui.updateJuries(this.currentCase.jury,this.caseIterator),this.ui.updateAccused(this.currentCase.accused,this.caseIterator),this.ui.bottom.classList.remove("hide"),this.ui.bottomNext.classList.add("hide"),this.caseIterator++,this.ui.case.openCase(this.currentCase),this.isPause=!1}async loadCase(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Ошибка загрузки JSON: ${t.status} ${t.statusText}`);const r=await t.json();return console.log(r),r}catch(t){throw console.error("Ошибка при загрузке дела:",t),t}}changeVerdict(e){e?this.currentVerdict=2:this.currentVerdict=1}announceVerdict(){this.currentVerdict!==0&&(this.currentVerdict===1?(console.log("Вынесен приговор: Виновен"),this.ui.openVerdict(!0)):(console.log("Вынесен приговор: Невиновен"),this.ui.openVerdict(!1)))}}function l(){let c=1920,e=1080,t=window.innerWidth,r=window.innerHeight,i=Math.min(t/c,r/e);const n=document.querySelector(".scaling-container");n.style.transform=`translate(-50%, -50%) scale(${i})`}window.addEventListener("resize",l);window.addEventListener("load",l);new C;
